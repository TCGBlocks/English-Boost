<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>English Boost - Flashcards</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .flip-card {
      perspective: 1000px;
    }
    .flip-card-inner {
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flipped .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      backface-visibility: hidden;
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 1rem;
      padding: 2rem;
    }
    .flip-card-back {
      transform: rotateY(180deg);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-purple-100 to-pink-100 min-h-screen flex flex-col items-center justify-center p-6">
  <h1 class="text-3xl font-bold text-purple-800 mb-4">Meus Flashcards</h1>
  <input type="file" id="csvFile" accept=".csv" class="mb-6" />
  <div class="w-full max-w-md">
    <div class="flip-card relative h-64" onclick="toggleFlip()">
      <div class="flip-card-inner w-full h-full relative bg-white shadow-xl rounded-2xl">
        <div class="flip-card-front text-center text-2xl font-bold text-purple-700 px-4">
          <span id="cardText">Clique em carregar</span>
          <button onclick="event.stopPropagation(); speak(currentCard.word)" class="ml-4 text-purple-600 hover:text-purple-800 text-xl">ðŸ”Š</button>
        </div>
        <div class="flip-card-back text-center text-2xl font-bold text-pink-600 px-4">
          <span id="cardTranslation">TraduÃ§Ã£o</span>
        </div>
      </div>
    </div>
    <div class="mt-6 flex justify-center gap-4">
      <button onclick="mark('FÃ¡cil')" class="bg-purple-600 text-white rounded-full px-4 py-2">FÃ¡cil</button>
      <button onclick="mark('Bom')" class="bg-purple-600 text-white rounded-full px-4 py-2">Bom</button>
      <button onclick="mark('DifÃ­cil')" class="bg-purple-600 text-white rounded-full px-4 py-2">DifÃ­cil</button>
      <button onclick="mark('NÃ£o lembro')" class="bg-purple-600 text-white rounded-full px-4 py-2">NÃ£o lembro</button>
    </div>
    <button onclick="nextCard()" class="mt-6 bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg shadow">PrÃ³ximo</button>
  </div>

  <script>
    let cards = [];
    let currentIndex = 0;
    let currentCard = {};

    function toggleFlip() {
      document.querySelector('.flip-card').classList.toggle('flipped');
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      speechSynthesis.speak(utterance);
    }

    function nextCard() {
      if (cards.length === 0) return;
      currentIndex = (currentIndex + 1) % cards.length;
      updateCard(cards[currentIndex]);
    }

    function updateCard(card) {
      currentCard = card;
      document.getElementById('cardText').textContent = card.word;
      document.getElementById('cardTranslation').textContent = card.translation;
      document.querySelector('.flip-card').classList.remove('flipped');
    }

    function mark(level) {
      alert(`VocÃª marcou como: ${level}`);
    }

    document.getElementById('csvFile').addEventListener('change', async (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const text = await file.text();
      const lines = text.trim().split('\n');
      const headers = lines[0].split(',');
      cards = lines.slice(1).map(line => {
        const data = {};
        line.split(',').forEach((value, i) => {
          data[headers[i].trim()] = value.replace(/"/g, '').trim();
        });
        return data;
      });
      currentIndex = 0;
      updateCard(cards[currentIndex]);
    });
  </script>
</body>
</html>